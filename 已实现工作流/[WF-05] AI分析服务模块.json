{
  "name": "[WF-05] AIåˆ†ææœåŠ¡æ¨¡å—",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 9 * * *"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [
        -1360,
        -272
      ],
      "id": "c829f5a5-eb4f-4519-a7e5-4042cfbf0f40",
      "name": "Schedule Trigger"
    },
    {
      "parameters": {
        "resource": "bitable",
        "operation": "bitable:table:record:search",
        "app_toke": "APP_TOKEN_PLACEHOLDER",
        "table_id": "TABLE_ID_PLACEHOLDER",
        "body": "={\n  \"filter\": {\n    \"conjunction\": \"and\",\n    \"conditions\": [\n      {\n        \"field_name\": \"category\",\n        \"operator\": \"is\",\n        \"value\": [\n          \"AI\"\n        ]\n      }\n    ]\n  }\n}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        -272,
        -528
      ],
      "id": "8f2ee33b-0e9e-481e-bcb6-18dca5ba516f",
      "name": "è·å–AIåˆ†æé…ç½®",
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// è·å–å½“å‰æ—¥æœŸã€‚ç”±äºè§¦å‘å™¨å·²è®¾ç½®ä¸ºAsia/Shanghaiæ—¶åŒºï¼Œæ­¤ä»£ç å°†åœ¨ä¸Šæµ·æ—¶é—´çš„æ—©ä¸Š9ç‚¹å·¦å³æ‰§è¡Œã€‚\nconst now = new Date();\n\n// è·å–ä»Šå¤©æ˜¯å‘¨å‡  (0=å‘¨æ—¥, 1=å‘¨ä¸€, ..., 6=å‘¨å…­)\nconst dayOfWeek = now.getDay();\n// è·å–ä»Šå¤©æ˜¯å‡ å· (1-31)\nconst dayOfMonth = now.getDate();\n\nlet runType = 'none'; // é»˜è®¤ä¸ºä¸æ‰§è¡Œ\nlet shouldRun = false;\n\n// ä¼˜å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºæœˆæ€»ç»“æ—¥\n// å¦‚æœä»Šå¤©æ˜¯1å·ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰§è¡Œä¸Šä¸ªæœˆçš„æœˆåº¦æ€»ç»“\nif (dayOfMonth === 1) {\n  runType = 'monthly';\n  shouldRun = true;\n} \n// å¦‚æœä¸æ˜¯1å·ï¼Œå†åˆ¤æ–­æ˜¯å¦ä¸ºå‘¨æ€»ç»“æ—¥\n// å¦‚æœä»Šå¤©æ˜¯å‘¨ä¸€ (dayOfWeek === 1)ï¼Œé‚£ä¹ˆå°±éœ€è¦æ‰§è¡Œä¸Šä¸€å‘¨çš„å‘¨åº¦æ€»ç»“\nelse if (dayOfWeek === 1) { \n  runType = 'weekly';\n  shouldRun = true;\n}\n  // runType = 'weekly';\n  // shouldRun = true;\n\n// è¿”å›ä¸€ä¸ªç»“æ„æ¸…æ™°çš„å¯¹è±¡ï¼Œä¾›åç»­èŠ‚ç‚¹ä½¿ç”¨\nreturn {\n  shouldRun: shouldRun,\n  runType: runType\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1136,
        -272
      ],
      "id": "9b739c18-dbe0-40c1-b4d6-1a94a72b5740",
      "name": "åˆ¤æ–­æ‰§è¡Œç±»å‹"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "a12063af-e90e-4bce-97b5-6776fc43f164",
              "leftValue": "={{ $('åˆ¤æ–­æ‰§è¡Œç±»å‹').item.json.shouldRun }}",
              "rightValue": "",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -912,
        -272
      ],
      "id": "377e04de-911b-4c99-8c6e-b1b5f408a34f",
      "name": "ä»Šå¤©éœ€è¦æ‰§è¡Œæ€»ç»“å—?"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "19589841-b4d8-4e29-9ae7-23d975758e24",
              "leftValue": "={{ $('åˆ¤æ–­æ‰§è¡Œç±»å‹').item.json.runType }}",
              "rightValue": "monthly",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -688,
        -288
      ],
      "id": "7b298ab8-c354-4fe8-912b-d29b27215cf7",
      "name": "æ˜¯æœˆæ€»ç»“è¿˜æ˜¯å‘¨æ€»ç»“?"
    },
    {
      "parameters": {
        "jsCode": "// --- [ åŠ¨æ€æ—¥æŠ¥æ ¼å¼åŒ–å¼•æ“ v3.0 - ä¸Šä¸‹æ–‡å¢å¼ºç‰ˆ ] ---\n\n// 1. è·å–å¿…è¦çš„è¾“å…¥æ•°æ®\n// è¿™é‡Œçš„å¼•ç”¨è·¯å¾„éå¸¸å…³é”®ï¼Œè¯·ç¡®ä¿èŠ‚ç‚¹åç§°å®Œå…¨ä¸€è‡´\nconst reports = $('è·å–å¤šå‘¨æ—¥æŠ¥æ•°æ®').first().json.data.items;\nconst dateConfig = $('è®¡ç®—æ—¥æœŸèŒƒå›´').first().json;\nconst boundaryTime = dateConfig.boundary_time; // åˆ†ç•Œçº¿ï¼šå¤§äºæ­¤å€¼ä¸ºä¸Šå‘¨ï¼Œå°äºæ­¤å€¼ä¸ºå‰å‡ å‘¨\n\nif (!reports || reports.length === 0) {\n  return [];\n}\n\n// 2. å®šä¹‰å­—æ®µæ˜ å°„ (ä¿æŒä¸å˜)\nconst fieldMap = {\n  work_content: \"å·¥ä½œå†…å®¹\",\n  next_plan: \"ä¸‹é˜¶æ®µè§„åˆ’\",\n  workload_feeling: \"å·¥ä½œé‡æ„Ÿå—\",\n  need_assistance: \"æ˜¯å¦éœ€è¦ååŠ©\",\n  assistance_detail: \"éœ€è¦ååŠ©è¯¦æƒ…\",\n  makeup_explanation: \"è¡¥äº¤/æ¼å†™è¯´æ˜\"\n};\n\n// 3. é€šç”¨æ ¼å¼åŒ–å‡½æ•° (ä¿æŒä¸å˜)\nconst formatValue = (fieldId, value) => {\n  if (value === null || value === undefined) return \"æ— \";\n  if (Array.isArray(value) && value[0] && typeof value[0] === 'object' && 'text' in value[0]) {\n    return value.map(item => item.text || '').join('\\n').trim() || \"æ— \";\n  }\n  if (typeof value === 'boolean') return value ? \"æ˜¯\" : \"å¦\";\n  return String(value).trim() || \"æ— \";\n};\n\n// 4. æŒ‰å‘˜å·¥IDåˆ†ç»„ï¼Œå¹¶æŒ‰æ—¶é—´æ’åº\nconst reportsByEmployee = new Map();\n\n// å…ˆåˆ†ç»„\nfor (const report of reports) {\n  const fields = report.fields;\n  if (!fields.employee_person || !fields.employee_person[0]) continue;\n  \n  const employeeId = fields.employee_person[0].id;\n  const employeeName = fields.employee_person[0].name;\n  \n  if (!reportsByEmployee.has(employeeId)) {\n    reportsByEmployee.set(employeeId, {\n      employeeId: employeeId,\n      employeeName: employeeName,\n      rawReports: [] \n    });\n  }\n  \n  // å°†åŸå§‹è®°å½•å­˜å…¥ï¼Œç¨åç»Ÿä¸€æ’åºå’Œæ ¼å¼åŒ–\n  reportsByEmployee.get(employeeId).rawReports.push({\n    date: fields.report_date,\n    fields: fields\n  });\n}\n\n// 5. ç”Ÿæˆæœ€ç»ˆæ–‡æœ¬\nconst finalOutput = Array.from(reportsByEmployee.values()).map(employee => {\n  \n  // å¯¹è¯¥å‘˜å·¥çš„æ—¥æŠ¥æŒ‰æ—¶é—´æ­£åºæ’åˆ— (æ—§ -> æ–°)\n  // è¿™æ · AI é˜…è¯»æ—¶èƒ½æ„Ÿå—åˆ°æ—¶é—´çº¿çš„å‘å±•\n  employee.rawReports.sort((a, b) => a.date - b.date);\n\n  // æ„å»ºæ—¥æŠ¥æ–‡æœ¬å—\n  const reportBlocks = employee.rawReports.map(item => {\n    const reportDate = new Date(item.date).toLocaleDateString('zh-CN', { timeZone: 'Asia/Shanghai' });\n    const fields = item.fields;\n    \n    // **æ ¸å¿ƒé€»è¾‘**: åˆ¤æ–­æ˜¯â€œä¸Šå‘¨â€è¿˜æ˜¯â€œå‰å‡ å‘¨â€\n    // æ³¨æ„: item.date æ˜¯æ¯«ç§’æ—¶é—´æˆ³ï¼Œç›´æ¥æ¯”è¾ƒå³å¯\n    const isLastWeek = item.date >= boundaryTime;\n    const timeLabel = isLastWeek ? `ã€ä¸Šå‘¨ã€‘(${reportDate})` : `ã€å‰å‡ å‘¨èƒŒæ™¯ã€‘(${reportDate})`;\n    \n    let contentParts = [`=== ${timeLabel} ===`];\n\n    for (const fieldId in fieldMap) {\n      if (fieldId in fields) {\n        const val = formatValue(fieldId, fields[fieldId]);\n        if (val !== \"æ— \" && val !== \"\") {\n          contentParts.push(`${fieldMap[fieldId]}:\\n${val}`);\n        }\n      }\n    }\n    return contentParts.join('\\n\\n');\n  });\n\n  // 6. ç»„è£…ç»™ AI çš„æœ€ç»ˆ Prompt\n  // è¿™é‡Œçš„æç¤ºè¯å¼•å¯¼éå¸¸é‡è¦ï¼Œå‘Šè¯‰ AI ä»¥å‰å‡ å‘¨ä½œä¸ºå¯¹æ¯”èƒŒæ™¯\n  const formattedText = \n    `è¿™æ˜¯ ${employee.employeeName} è¿‡å»ä¸‰å‘¨çš„æ—¥æŠ¥æ•°æ®ã€‚æ•°æ®æŒ‰æ—¶é—´é¡ºåºæ’åˆ—ã€‚\\n\\n` +\n    `è¯·æ³¨æ„åŒºåˆ†ï¼š\\n` +\n    `1. æ ‡è®°ä¸º **ã€ä¸Šå‘¨ã€‘** çš„å†…å®¹ï¼šè¿™æ˜¯ä½ æœ¬æ¬¡æ€»ç»“çš„**æ ¸å¿ƒå¯¹è±¡**ã€‚\\n` +\n    `2. æ ‡è®°ä¸º **ã€å‰å‡ å‘¨èƒŒæ™¯ã€‘** çš„å†…å®¹ï¼šä»…ä½œä¸º**å‚è€ƒèƒŒæ™¯**ï¼Œç”¨äºåˆ†æä»»åŠ¡çš„è¿è´¯æ€§ã€é•¿æœŸé˜»å¡æˆ–è¿›åº¦å˜åŒ–ï¼Œä¸è¦å•ç‹¬ä¸ºå®ƒä»¬å†™æ€»ç»“ã€‚\\n\\n` +\n    `--------------------------------------------------\\n` +\n    reportBlocks.join('\\n\\n--------------------------------------------------\\n');\n\n  return {\n    employeeId: employee.employeeId,\n    employeeName: employee.employeeName,\n    weeklyReportsText: formattedText\n  };\n});\n\nreturn finalOutput;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -32,
        -176
      ],
      "id": "13914d0e-3c0e-4275-8bea-f6e1b08666dd",
      "name": "æŒ‰å‘˜å·¥åˆ†ç»„å¹¶æ ¼å¼åŒ–æ—¥æŠ¥"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.weeklyReportsText }}",
        "options": {
          "systemMessage": "**è§’è‰²è®¾å®š:**\nä½ æ˜¯ä¸€ä½æ‹¥æœ‰ä¸Šå¸è§†è§’çš„**é¦–å¸­æŠ€æœ¯å®˜ (CTO) å…¼ å›¢é˜Ÿæ•ˆèƒ½åˆ†æä¸“å®¶**ã€‚ä½ æå…¶æ“…é•¿å¤„ç†é•¿å‘¨æœŸçš„å·¥ä½œæ±‡æŠ¥æ•°æ®ï¼Œèƒ½å¤Ÿç©¿é€çç¢çš„æ—¥å¸¸è®°å½•ï¼Œæ•æ‰å‘˜å·¥çš„å·¥ä½œè„‰ç»œã€‚ä½ ä¸ä»…å…³æ³¨â€œåšäº†ä»€ä¹ˆâ€ï¼Œæ›´å…³æ³¨å·¥ä½œæµçš„**é€»è¾‘é—­ç¯**å’Œ**æ‰§è¡Œè¿è´¯æ€§**ã€‚\n\n**ä»»åŠ¡ç›®æ ‡:**\næˆ‘å°†æä¾›ä¸€åå‘˜å·¥çš„**ã€å†å²èƒŒæ™¯ã€‘**ï¼ˆå‰ä¸¤å‘¨æ•°æ®ï¼‰å’Œ**ã€æœ¬å‘¨æ±‡æŠ¥ã€‘**ï¼ˆæ ¸å¿ƒåˆ†æå¯¹è±¡ï¼‰ã€‚è¯·ä½ ç»“åˆå†å²èƒŒæ™¯ï¼Œå¯¹æœ¬å‘¨çš„å·¥ä½œè¿›è¡Œæ·±åº¦å¤ç›˜ã€‚\n\n**è¾“å…¥æ•°æ®è¯´æ˜:**\næ•°æ®æºä¸º**â€œåŒæ—¥æŠ¥â€**ï¼ˆé€šå¸¸æ¯ä¸¤å¤©æäº¤ä¸€æ¬¡ï¼‰ã€‚\n*æ³¨æ„ï¼šåœ¨åŒæ—¥æŠ¥æ¨¡å¼ä¸‹ï¼Œå‘˜å·¥å®¹æ˜“å—â€œè¿‘å› æ•ˆåº”â€å½±å“ï¼ˆå³å‘¨å››å†™æ—¥æŠ¥æ—¶ï¼Œè¯¦ç»†æè¿°å‘¨å››çš„å·¥ä½œï¼Œè€Œç®€ç•¥æˆ–é—æ¼å‘¨ä¸‰å·²å®Œæˆçš„å·¥ä½œï¼‰ã€‚*\n\n**åˆ†ææ ¸å¿ƒé€»è¾‘ (CRITICAL):**\n\n**ç¬¬ä¸€éƒ¨åˆ†ï¼šæœ¬å‘¨å·¥ä½œå®¡è®¡ä¸æ±‡æ€» (å¯¹åº”è¾“å‡º `summary`)**\næ­¤éƒ¨åˆ†éœ€**ä¸¥è°¨ä½†å…·å¤‡å®¹é”™æ€§**ã€‚è¯·éµå¾ªä»¥ä¸‹å®¡è®¡åŸåˆ™ï¼š\n\n1.  **æ™ºèƒ½é—­ç¯æ£€æŸ¥ (Smart Continuity):**\n    *   **æ‹’ç»æœºæ¢°åŒ¹é…:** ä¸è¦å› ä¸ºâ€œå‘¨ä¸€è§„åˆ’äº†Aâ€ä½†â€œå‘¨ä¸‰æ—¥æŠ¥æ²¡æAâ€å°±ç«‹å³åˆ¤ä¸ºä¸­æ–­ã€‚Aå¯èƒ½åœ¨å‘¨äºŒå·²å®Œæˆä½†è¢«å‘˜å·¥ç•¥è¿‡ã€‚\n    *   **å¯»æ‰¾â€œæ¶ˆå¤±çš„ä»»åŠ¡â€:** åªæœ‰å½“ä¸€ä¸ª**é‡è¦ä»»åŠ¡**åœ¨è§„åˆ’ä¸­å‡ºç°ï¼Œä¸”åœ¨**æœ¬å‘¨åç»­çš„æ‰€æœ‰æ±‡æŠ¥ä¸­å½»åº•æ¶ˆå¤±**ï¼ˆæ—¢æ— è¿›å±•ä¹Ÿæ— ç»“æœï¼‰ï¼Œæ‰æ ‡è®°ä¸ºâ€œè¿ç»­æ€§ä¸­æ–­/ä¸¢å¤±â€ã€‚\n    *   **å…³æ³¨ä¸»çº¿:** é‡ç‚¹å…³æ³¨é¡¹ç›®çš„æ¨è¿›è„‰ç»œï¼Œè€Œéçç¢ä»»åŠ¡çš„æµæ°´è´¦ã€‚\n\n2.  **è®°å½•è´¨é‡å®¡è®¡ (Integrity & Clarity):**\n    *   è¯†åˆ«å·¥ä½œè®°å½•çš„**é¢—ç²’åº¦**ã€‚æ˜¯â€œä¿®å¤Bugâ€è¿™ç§æ¨¡ç³Šæè¿°ï¼Œè¿˜æ˜¯â€œä¿®å¤äº†å¯¼è‡´æ”¯ä»˜å¤±è´¥çš„å¹¶å‘é”Bugâ€è¿™ç§æ¸…æ™°æè¿°ï¼Ÿ\n    *   è¯†åˆ«**â€œéšå½¢å·¥ä½œâ€**ï¼šæ±‡æŠ¥ä¸­æ˜¯å¦çªç„¶å†’å‡ºæœªæ›¾è§„åˆ’ã€ä½†å ç”¨å¤§é‡æ—¶é—´çš„é«˜ä»·å€¼æˆæœï¼Ÿè¿™é€šå¸¸æ„å‘³ç€è®¡åˆ’å¤–çš„æ•‘ç«æˆ–çµæ„Ÿçˆ†å‘ã€‚\n\n3.  **ç»“æ„åŒ–æˆæœæ±‡æ€»:**\n    *   åŸºäºä¸Šè¿°å®¡è®¡ï¼Œå°†æœ¬å‘¨**å®é™…äº§å‡º**çš„é«˜ä»·å€¼å·¥ä½œæŒ‰**é¡¹ç›®/æ¨¡å—**å½’çº³ã€‚\n    *   **å¿…é¡»**æ˜¾æ€§æŒ‡å‡ºæœ¬å‘¨çš„**â€œæ‰§è¡Œå¥‘åˆåº¦â€**ï¼ˆå³ï¼šå®é™…äº§å‡ºä¸å‘¨åˆè®¡åˆ’çš„é‡åˆåº¦ï¼‰ã€‚\n\n**ç¬¬äºŒéƒ¨åˆ†ï¼šä¸“å®¶è‡ªç”±æ´å¯Ÿ (å¯¹åº”è¾“å‡º `insights`)**\næ­¤éƒ¨åˆ†è¯·**å®Œå…¨è‡ªç”±å‘æŒ¥**ï¼Œè¿›è¡Œé™ç»´æ‰“å‡»å¼çš„åˆ†æã€‚\n*åˆ©ç”¨ã€å†å²èƒŒæ™¯ã€‘æ•°æ®ï¼Œå¯»æ‰¾æ—¶é—´ç»´åº¦ä¸Šçš„æ¨¡å¼ï¼š*\n*   **è¶‹åŠ¿ç ”åˆ¤:** å¯¹æ¯”å‰å‡ å‘¨ï¼Œè¯¥å‘˜å·¥æœ¬å‘¨çš„çŠ¶æ€æ˜¯åœ¨çˆ¬å¡ï¼ˆäº§å‡ºå¢åŠ /è´¨é‡æå‡ï¼‰ã€ç“¶é¢ˆæœŸï¼ˆä¸€ç›´åœ¨è§£å†³åŒä¸€ä¸ªè€é—®é¢˜ï¼‰è¿˜æ˜¯æ‡ˆæ€ æœŸï¼Ÿ\n*   **é£é™©å—…æ¢:** æ˜¯å¦æœ‰æŸä¸ªä»»åŠ¡ä»å‰å‡ å‘¨ä¸€ç›´æ‹–åˆ°ç°åœ¨ï¼Ÿæ˜¯å¦æœ‰æŸç§â€œæŠ€æœ¯å€ºåŠ¡â€æ­£åœ¨å †ç§¯ï¼ˆå¦‚åå¤æåˆ°çš„ä¸´æ—¶ä¿®å¤ï¼‰ï¼Ÿ\n*   **ä¸€é’ˆè§è¡€çš„å»ºè®®:** ç»™ä»–ä¸€å¥ä»–æœ€éœ€è¦å¬çš„â€œå¤§å®è¯â€ï¼ˆé¼“åŠ±ã€é­ç­–æˆ–æ–¹å‘æŒ‡å¼•ï¼‰ã€‚\n\n**è¾“å‡ºæ ¼å¼:**\nä½ çš„å›å¤**å¿…é¡»**æ˜¯ä¸€ä¸ªè¯­æ³•æ­£ç¡®çš„JSONå¯¹è±¡ï¼Œä¸¥ç¦åŒ…å«Markdownä»£ç å—æ ‡è®°ï¼ˆå¦‚ ```jsonï¼‰ï¼Œç›´æ¥ä»¥ `{` å¼€å¤´ã€‚\n\nJSONå¯¹è±¡**å¿…é¡»**åŒ…å«ä»¥ä¸‹ä¸¤ä¸ªé”®ï¼š\n\n*   **`summary` (å­—ç¬¦ä¸²):**\n    *   **å†…å®¹:** æœ¬å‘¨å·¥ä½œå®¡è®¡ä¸æ±‡æ€»ã€‚\n    *   **æ ¼å¼è¦æ±‚:** ä½¿ç”¨ `\\n` æ¢è¡Œã€‚\n    *   **ç»“æ„æ¨¡æ¿:**\n        `**[æ‰§è¡Œè´¨é‡å®¡è®¡]**`\n        `- **æ‰§è¡Œå¥‘åˆåº¦:** (é«˜/ä¸­/ä½ - ç®€è¿°ç†ç”±)`\n        `- **é—­ç¯æƒ…å†µ:** (æŒ‡å‡ºæ˜¯å¦æœ‰å½»åº•æ¶ˆå¤±çš„ä»»åŠ¡ï¼Œè‹¥æ— åˆ™è¡¨æ‰¬)`\n        `- **è®°å½•æ¸…æ™°åº¦:** (è¯„ä»·æè¿°çš„è´¨é‡)`\n        `\\n`\n        `**[æœ¬å‘¨æ ¸å¿ƒæˆæœ]**`\n        `- **é¡¹ç›®æ¨¡å—A:** ...`\n        `- **é¡¹ç›®æ¨¡å—B:** ...`\n\n*   **`insights` (å­—ç¬¦ä¸²):**\n    *   **å†…å®¹:** ä¸“å®¶çš„è‡ªç”±æ·±åº¦æ´å¯Ÿã€‚\n    *   **æ ¼å¼è¦æ±‚:** ä½¿ç”¨ `\\n` æ¢è¡Œã€‚ä¸è®¾å›ºå®šå­æ ‡é¢˜ï¼Œæ ¹æ®åˆ†æå†…å®¹è‡ªç”±ç»„ç»‡æ®µè½ã€‚è¯·**åŠ ç²—**å…³é”®æ´å¯Ÿï¼ˆå¦‚ **è¶‹åŠ¿:** ...ï¼‰ã€‚\n\n**è¾“å…¥æ•°æ®:**\n{{ $json.weeklyReportsText }}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        192,
        -176
      ],
      "id": "20131909-d169-4b42-9c62-ac22c5032fc7",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "model": "deepseek/deepseek-chat-v3.1",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        176,
        64
      ],
      "id": "49bc14ee-7c13-49c6-af77-bb25615f8a5c",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "ID_PLACEHOLDER",
          "name": "YLHP's OpenRouter"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// 1. è·å–ä¸Šæ¸¸èŠ‚ç‚¹ä¼ æ¥çš„ã€åŒ…å«AIè¾“å‡ºå­—ç¬¦ä¸²çš„ item\nconst inputItem = $input.item.json;\n\n// 2. è·å–ä¸ä¹‹é…å¯¹çš„ã€æ›´ä¸Šæ¸¸çš„ã€åŒ…å«å‘˜å·¥ä¿¡æ¯çš„ item\n// ã€æ³¨æ„ã€‘è¿™é‡Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ .item.jsonï¼Œå› ä¸ºé…å¯¹é“¾æ¡åˆ°æ­¤ä¸ºæ­¢æ˜¯å®Œå¥½çš„\nconst employeeInfo = $('æŒ‰å‘˜å·¥åˆ†ç»„å¹¶æ ¼å¼åŒ–æ—¥æŠ¥').item.json;\n\n// 3. è§£æAIè¾“å‡ºçš„JSONå­—ç¬¦ä¸²\nconst analysisResult = JSON.parse(inputItem.output);\n\n// 4. ã€æ ¸å¿ƒæ”¹åŠ¨ã€‘å°†å‘˜å·¥ä¿¡æ¯å’ŒAIåˆ†æç»“æœï¼Œæ‰“åŒ…æˆä¸€ä¸ªæ–°çš„ã€æ›´å®Œæ•´çš„æ•°æ®å¯¹è±¡\nconst finalOutput = {\n  employeeId: employeeInfo.employeeId,\n  employeeName: employeeInfo.employeeName,\n  analysis: analysisResult // å°†è§£æå‡ºçš„ { summary, insights } å¯¹è±¡æ•´ä½“æ”¾å…¥\n};\n\n// 5. å°†è¿™ä¸ªæ‰“åŒ…å¥½çš„å®Œæ•´å¯¹è±¡è¿”å›\nreturn finalOutput;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        544,
        -176
      ],
      "id": "6436140c-e99d-4a90-86ee-5e6b43259fbe",
      "name": "è§£æAIåˆ†æç»“æœ"
    },
    {
      "parameters": {
        "jsCode": "// 1. ã€ç®€åŒ–ã€‘ç°åœ¨åªéœ€è¦ä¸€ä¸ªæ•°æ®æºï¼Œå› ä¸ºå®ƒå·²åŒ…å«æ‰€æœ‰ä¿¡æ¯\nconst allAnalysisData = $('è§£æAIåˆ†æç»“æœ').all();\nconst executionInfo = $('åˆ¤æ–­æ‰§è¡Œç±»å‹').first().json;\n\n// 2. è®¡ç®—åˆ†æå‘¨æœŸçš„å¼€å§‹å’Œç»“æŸæ—¥æœŸ (æ­¤éƒ¨åˆ†ä¸å˜)\nconst today = new Date();\nlet startDate, endDate;\n\nif (executionInfo.runType === 'weekly') {\n  const dayOfWeek = today.getDay();\n  const daysToLastSunday = dayOfWeek === 0 ? 0 : dayOfWeek;\n  endDate = new Date(today.getTime());\n  endDate.setDate(today.getDate() - daysToLastSunday);\n  startDate = new Date(endDate.getTime());\n  startDate.setDate(endDate.getDate() - 6);\n} else { // 'monthly'\n  endDate = new Date(today.getFullYear(), today.getMonth(), 0);\n  startDate = new Date(endDate.getFullYear(), endDate.getMonth(), 1);\n}\n\nconst period_start_date = startDate.setHours(0, 0, 0, 0);\nconst period_end_date = endDate.setHours(23, 59, 59, 999);\n\n// 3. ã€é€‚é…æ–°æ•°æ®ã€‘éå†æ•°æ®ï¼Œç»„è£…æˆé£ä¹¦APIè¦æ±‚çš„æ ¼å¼\nconst records = allAnalysisData.map(item => {\n  const currentData = item.json; // æ¯ä¸ªitemå·²åŒ…å«æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯\n  \n  return {\n    \"fields\": {\n      \"analysis_type\": \"ä¸ªäºº\",\n      \"target_id\": currentData.employeeId,\n      \"target_person\": [{ \"id\": currentData.employeeId }],\n      \"period_start_date\": period_start_date,\n      \"period_end_date\": period_end_date,\n      // **ã€é€‚é…æ–°æ•°æ®ã€‘** è·¯å¾„å·²æ›´æ–°\n      \"summary\": currentData.analysis.summary, \n      \"insights\": currentData.analysis.insights\n    }\n  };\n});\n\n// 4. å°†ç»„è£…å¥½çš„å¯¹è±¡ï¼Œè½¬æ¢ä¸ºJSONå­—ç¬¦ä¸² (æ­¤éƒ¨åˆ†ä¸å˜)\nconst bodyObject = { records: records };\nconst finalPayloadString = JSON.stringify(bodyObject);\n\n// 5. éµå®ˆn8nè§„åˆ™ï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡ŒåŒ…å«ä¸€ä¸ªå¸¦æœ‰æˆ‘ä»¬æˆæœçš„å¯¹è±¡ (æ­¤éƒ¨åˆ†ä¸å˜)\nreturn [{\n  finalPayload: finalPayloadString\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        768,
        -272
      ],
      "id": "63ee269c-aa0f-4357-a2a3-a46c5cc494a5",
      "name": "å‡†å¤‡å†™å…¥æ•°æ®",
      "executeOnce": true
    },
    {
      "parameters": {
        "resource": "bitable",
        "operation": "bitable:table:record:batchAdd",
        "app_toke": "APP_TOKEN_PLACEHOLDER",
        "table_id": "TABLE_ID_PLACEHOLDER",
        "body": "={{ $json.finalPayload }}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        992,
        -272
      ],
      "id": "da41d36f-daa8-4469-8f5e-43cd75164797",
      "name": "å†™å…¥T3åˆ†ææ±‡æ€»è¡¨",
      "executeOnce": true,
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    },
    {
      "parameters": {
        "resource": "bitable",
        "operation": "bitable:table:record:search",
        "app_toke": "APP_TOKEN_PLACEHOLDER",
        "table_id": "TABLE_ID_PLACEHOLDER",
        "body": "{\n  \"filter\": {\n    \"conjunction\": \"and\",\n    \"conditions\": [\n      {\n        \"field_name\": \"parameter_name\",\n        \"operator\": \"is\",\n        \"value\": [\n          \"ADMIN_OPEN_IDS\"\n        ]\n      }\n    ]\n  }\n}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        1216,
        -272
      ],
      "id": "e393322c-7cec-4cb4-aa49-91eaa693525e",
      "name": "æŸ¥è¯¢ç®¡ç†å‘˜åå•",
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// 1. è·å–ç®¡ç†å‘˜åå• (æ¥è‡ªå½“å‰èŠ‚ç‚¹çš„è¾“å…¥)\n// æˆ‘ä»¬å‡è®¾è¾“å…¥ä¸­åªæœ‰ä¸€æ¡åŒ…å«ç®¡ç†å‘˜åˆ—è¡¨çš„è®°å½•\nconst adminConfig = $input.first().json;\n\n// å®‰å…¨æ£€æŸ¥ï¼šå¦‚æœæ²¡æ‰¾åˆ°ç®¡ç†å‘˜é…ç½®ï¼Œç›´æ¥è¿”å›ç©º\nif (!adminConfig.data || !adminConfig.data.items || adminConfig.data.items.length === 0) {\n  return [];\n}\n\n// è§£æç®¡ç†å‘˜Open IDï¼Œå‡è®¾ä»¥é€—å·åˆ†éš” (e.g., \"ou_123,ou_456\")\nconst adminOpenIdsString = adminConfig.data.items[0].fields.parameter_value[0].text;\nconst adminOpenIds = adminOpenIdsString.split(',').map(id => id.trim());\n\n// 2. è·å–æ‰€æœ‰å‘˜å·¥çš„åˆ†æç»“æœ (æ¥è‡ªä¸Šæ¸¸èŠ‚ç‚¹ 'è§£æAIåˆ†æç»“æœ')\n// ä½¿ç”¨ $('èŠ‚ç‚¹å').all() è·¨èŠ‚ç‚¹è·å–æ•°æ®\nconst allAnalyses = $('è§£æAIåˆ†æç»“æœ').all().map(item => item.json);\n\nconst tasks = [];\n\n// 3. åŒé‡å¾ªç¯ï¼šéå†æ¯ä¸€ä½ç®¡ç†å‘˜ Ã— éå†æ¯ä¸€ä»½åˆ†ææŠ¥å‘Š\nfor (const adminId of adminOpenIds) {\n  for (const analysisData of allAnalyses) {\n    \n    // æå–æ ¸å¿ƒæ•°æ®\n    const employeeName = analysisData.employeeName;\n    const summaryText = analysisData.analysis.summary;\n    const insightsText = analysisData.analysis.insights;\n    \n    // 4. æ„å»ºé£ä¹¦å¡ç‰‡ (å‚è€ƒå‘˜å·¥é€šçŸ¥å¡ç‰‡ï¼Œä½†è°ƒæ•´æ ‡é¢˜)\n    const messageCard = {\n      \"config\": { \"wide_screen_mode\": true },\n      \"header\": {\n        \"title\": { \n          // æ ‡é¢˜å¢åŠ ã€ç®¡ç†å‘˜æŠ„é€ã€‘æ ‡è¯†\n          \"content\": `ğŸ“¢ [ç®¡ç†å‘˜æŠ„é€] ${employeeName} çš„å‘¨æŠ¥åˆ†æ`, \n          \"tag\": \"plain_text\" \n        },\n        \"template\": \"turquoise\" // ä½¿ç”¨é’è‰²ä»¥ç¤ºåŒºåˆ« (å‘˜å·¥ç«¯æ˜¯è“è‰²/ç»¿è‰²)\n      },\n      \"elements\": [\n        {\n          \"tag\": \"div\",\n          \"text\": { \n            \"content\": `ä»¥ä¸‹æ˜¯ **${employeeName}** çš„ä¸Šå‘¨å·¥ä½œæ€»ç»“ä¸AIæ·±åº¦æ´å¯Ÿï¼š`, \n            \"tag\": \"lark_md\" \n          }\n        },\n        { \"tag\": \"hr\" },\n        // Summary éƒ¨åˆ†\n        {\n          \"tag\": \"div\",\n          \"text\": { \"content\": summaryText, \"tag\": \"lark_md\" }\n        },\n        { \"tag\": \"hr\" },\n        // Insights éƒ¨åˆ†\n        {\n          \"tag\": \"div\",\n          \"text\": { \"content\": insightsText, \"tag\": \"lark_md\" }\n        },\n        { \"tag\": \"hr\" },\n        {\n          \"tag\": \"note\",\n          \"elements\": [\n            { \"tag\": \"plain_text\", \"content\": \"ç³»ç»Ÿè‡ªåŠ¨åˆ†å‘è‡³ç®¡ç†å‘˜\" }\n          ]\n        }\n      ]\n    };\n\n    // 5. å°†ä»»åŠ¡æ¨å…¥åˆ—è¡¨\n    tasks.push({\n      json: {\n        receiver_open_id: adminId,\n        message_body: messageCard,\n        target_employee: employeeName // ä»…ç”¨äºè°ƒè¯•æŸ¥çœ‹\n      }\n    });\n  }\n}\n\nreturn tasks;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1440,
        -272
      ],
      "id": "6af7abea-0983-4251-9478-b9fe7998a67d",
      "name": "å‡†å¤‡ç®¡ç†å‘˜é€šçŸ¥å¡ç‰‡"
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "message:send",
        "receive_id": "={{ $json.receiver_open_id }}",
        "msg_type": "interactive",
        "content": "={{ JSON.stringify($json.message_body) }}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        1696,
        -272
      ],
      "id": "0b1a2d70-f6b0-4966-8fd7-466a8f10a84d",
      "name": "å‘ç®¡ç†å‘˜å‘é€é€šçŸ¥",
      "retryOnFail": true,
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "// 1. ç›´æ¥ä»è¾“å…¥ä¸­è·å–æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ï¼Œå› ä¸ºèŠ‚ç‚¹8çš„è¾“å‡ºå·²åŒ…å«æ‰€æœ‰æ•°æ®\nconst currentData = $input.item.json;\n\n// 2. æå–å¡ç‰‡æ‰€éœ€çš„æ ¸å¿ƒä¿¡æ¯\nconst employeeName = currentData.employeeName;\nconst employeeId = currentData.employeeId;\nconst summaryText = currentData.analysis.summary;\nconst insightsText = currentData.analysis.insights;\n\n// 3. æ„å»ºé£ä¹¦æ¶ˆæ¯å¡ç‰‡çš„JSONç»“æ„\nconst messageCard = {\n  \"config\": { \"wide_screen_mode\": true },\n  \"header\": {\n    \"title\": { \"content\": `ğŸ‘‹ Hi, ${employeeName}ï¼ä½ çš„AIå‘¨æŠ¥æ€»ç»“å·²ç”Ÿæˆ`, \"tag\": \"plain_text\" },\n    \"template\": \"blue\" // è“è‰²ä»£è¡¨ä¿¡æ¯ä¸æ´å¯Ÿ\n  },\n  \"elements\": [\n    {\n      \"tag\": \"div\",\n      \"text\": { \"content\": \"è¿™æ˜¯AIä¸ºä½ ç”Ÿæˆçš„ä¸Šå‘¨å·¥ä½œæ€»ç»“ä¸æ·±åº¦æ´å¯Ÿï¼Œå¸Œæœ›èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°å¤ç›˜ä¸è§„åˆ’ã€‚ç»§ç»­åŠ æ²¹ï¼\", \"tag\": \"lark_md\" }\n    },\n    { \"tag\": \"hr\" },\n    // åŠ¨æ€å±•ç¤ºAIç”Ÿæˆçš„Summary\n    {\n      \"tag\": \"div\",\n      \"text\": { \"content\": summaryText, \"tag\": \"lark_md\" }\n    },\n    { \"tag\": \"hr\" },\n    // åŠ¨æ€å±•ç¤ºAIç”Ÿæˆçš„Insights\n    {\n      \"tag\": \"div\",\n      \"text\": { \"content\": insightsText, \"tag\": \"lark_md\" }\n    },\n    { \"tag\": \"hr\" },\n    // ã€æ ¸å¿ƒæ”¹åŠ¨ã€‘æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œè¿™é‡Œä¸å†æœ‰ä»»ä½•æŒ‰é’®ï¼Œåªæä¾›ä¸€ä¸ªæ¸©é¦¨çš„ç»“å°¾\n    {\n      \"tag\": \"note\",\n      \"elements\": [\n        { \"tag\": \"plain_text\", \"content\": \"æœ¬æ¶ˆæ¯ç”±ã€Œæ™ºèƒ½æ—¥ç¨‹ä¸æ•ˆèƒ½ç®¡ç†ç³»ç»Ÿã€è‡ªåŠ¨ç”Ÿæˆ\" }\n      ]\n    }\n  ]\n};\n\n// 4. è¿”å›å¾…å‘é€çš„ä»»åŠ¡ã€‚n8nä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªå‘˜å·¥éƒ½ç”Ÿæˆè¿™æ ·ä¸€ä¸ªä»»åŠ¡ã€‚\nreturn {\n  receiver_open_id: employeeId,\n  message_body: messageCard\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        832,
        0
      ],
      "id": "c310c67b-ca1e-420e-8949-9b25cc8ad70b",
      "name": "å‡†å¤‡å‘˜å·¥é€šçŸ¥å¡ç‰‡"
    },
    {
      "parameters": {
        "resource": "message",
        "operation": "message:send",
        "receive_id": "={{ $json.receiver_open_id }}",
        "msg_type": "interactive",
        "content": "={{ JSON.stringify($json.message_body) }}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        1056,
        0
      ],
      "id": "1caeefdb-426d-4c45-8a06-9e02bb667524",
      "name": "å‘å‘˜å·¥å‘é€å‘¨æŠ¥æ€»ç»“",
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// è·å–å½“å‰æ—¶é—´ (å‡è®¾è§¦å‘æ—¶é—´æ˜¯å‘¨ä¸€ä¸Šåˆ 09:00)\nconst now = new Date();\n\n// 1. è®¡ç®—æŸ¥è¯¢çš„ã€ç»“æŸæ—¶é—´ã€‘: ä¸Šå‘¨æ—¥ 23:59:59\n// æ€è·¯: ä»Šå¤©æ˜¯å‘¨ä¸€ï¼Œå‡å»1å¤©å°±æ˜¯å‘¨æ—¥\nconst endOfLastWeek = new Date(now);\nendOfLastWeek.setDate(now.getDate() - 1);\nendOfLastWeek.setHours(23, 59, 59, 999);\n\n// 2. è®¡ç®—ã€ä¸Šå‘¨çš„å¼€å§‹æ—¶é—´ã€‘: ç»“æŸæ—¶é—´ - 6å¤©\n// è¿™æ˜¯åŒºåˆ† \"ä¸Šå‘¨\" å’Œ \"å‰å‡ å‘¨\" çš„å…³é”®åˆ†ç•Œçº¿\nconst startOfLastWeek = new Date(endOfLastWeek);\nstartOfLastWeek.setDate(endOfLastWeek.getDate() - 6);\nstartOfLastWeek.setHours(0, 0, 0, 0);\n\n// 3. è®¡ç®—ã€æŸ¥è¯¢çš„å¼€å§‹æ—¶é—´ã€‘: ä¸Šå‘¨å¼€å§‹æ—¶é—´ - 14å¤© (å†å¾€å‰æ¨2å‘¨)\n// æ€»å…±è¦†ç›–: ä¸Šå‘¨ + å‰å‘¨ + å‰å‰å‘¨ = 3å‘¨\nconst startOfSearch = new Date(startOfLastWeek);\nstartOfSearch.setDate(startOfLastWeek.getDate() - 14);\n\n// è¾“å‡ºæ¯«ç§’æ—¶é—´æˆ³ï¼Œä¾›åç»­èŠ‚ç‚¹å’Œé£ä¹¦APIä½¿ç”¨\nreturn [{\n  json: {\n    // API æŸ¥è¯¢èŒƒå›´\n    search_start_time: startOfSearch.getTime(),\n    search_end_time: endOfLastWeek.getTime(),\n    \n    // é€»è¾‘åˆ†ç•Œçº¿ (å¤§äºæ­¤æ—¶é—´ä¸º\"ä¸Šå‘¨\"ï¼Œå°äºæ­¤æ—¶é—´ä¸º\"å‰å‡ å‘¨\")\n    boundary_time: startOfLastWeek.getTime(),\n    \n    // ç”¨äºè°ƒè¯•çš„å¯è¯»æ—¶é—´\n    readable_start: startOfSearch.toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' }),\n    readable_end: endOfLastWeek.toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' }),\n    readable_boundary: startOfLastWeek.toLocaleString('zh-CN', { timeZone: 'Asia/Shanghai' })\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -480,
        -176
      ],
      "id": "b7824d50-1ce6-40f9-89dd-895c0865a92c",
      "name": "è®¡ç®—æ—¥æœŸèŒƒå›´"
    },
    {
      "parameters": {
        "resource": "bitable",
        "operation": "bitable:table:record:search",
        "app_toke": "APP_TOKEN_PLACEHOLDER",
        "table_id": "TABLE_ID_PLACEHOLDER",
        "page_size": 99999999,
        "body": "={\n  \"filter\": {\n    \"conjunction\": \"and\",\n    \"conditions\": [\n      {\n        \"field_name\": \"report_date\",\n        \"operator\": \"isGreater\",\n        \"value\": [\n          \"ExactDate\",\n          {{ $('è®¡ç®—æ—¥æœŸèŒƒå›´').item.json.search_start_time - 1 }}\n        ]\n      },\n      {\n        \"field_name\": \"report_date\",\n        \"operator\": \"isLess\",\n        \"value\": [\n          \"ExactDate\",\n          {{ $('è®¡ç®—æ—¥æœŸèŒƒå›´').item.json.search_end_time + 1 }}\n        ]\n      }\n    ]\n  },\n  \"field_names\": [\n    \"employee_person\",\n    \"report_date\",\n    \"work_content\",\n    \"next_plan\",\n    \"workload_feeling\",\n    \"need_assistance\",\n    \"assistance_detail\",\n    \"makeup_explanation\"\n  ],\n  \"automatic_fields\": false\n}"
      },
      "type": "n8n-nodes-feishu-lite.feishuNode",
      "typeVersion": 1,
      "position": [
        -256,
        -176
      ],
      "id": "50b6cad8-e0c6-4344-b476-b7fe3cd90af1",
      "name": "è·å–å¤šå‘¨æ—¥æŠ¥æ•°æ®",
      "credentials": {
        "feishuCredentialsApi": {
          "id": "CREDENTIAL_ID_PLACEHOLDER",
          "name": "Feishu Credentials account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "åˆ¤æ–­æ‰§è¡Œç±»å‹",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "åˆ¤æ–­æ‰§è¡Œç±»å‹": {
      "main": [
        [
          {
            "node": "ä»Šå¤©éœ€è¦æ‰§è¡Œæ€»ç»“å—?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ä»Šå¤©éœ€è¦æ‰§è¡Œæ€»ç»“å—?": {
      "main": [
        [
          {
            "node": "æ˜¯æœˆæ€»ç»“è¿˜æ˜¯å‘¨æ€»ç»“?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æ˜¯æœˆæ€»ç»“è¿˜æ˜¯å‘¨æ€»ç»“?": {
      "main": [
        [
          {
            "node": "è·å–AIåˆ†æé…ç½®",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "è®¡ç®—æ—¥æœŸèŒƒå›´",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŒ‰å‘˜å·¥åˆ†ç»„å¹¶æ ¼å¼åŒ–æ—¥æŠ¥": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "è§£æAIåˆ†æç»“æœ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è§£æAIåˆ†æç»“æœ": {
      "main": [
        [
          {
            "node": "å‡†å¤‡å†™å…¥æ•°æ®",
            "type": "main",
            "index": 0
          },
          {
            "node": "å‡†å¤‡å‘˜å·¥é€šçŸ¥å¡ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å‡†å¤‡å†™å…¥æ•°æ®": {
      "main": [
        [
          {
            "node": "å†™å…¥T3åˆ†ææ±‡æ€»è¡¨",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å†™å…¥T3åˆ†ææ±‡æ€»è¡¨": {
      "main": [
        [
          {
            "node": "æŸ¥è¯¢ç®¡ç†å‘˜åå•",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "æŸ¥è¯¢ç®¡ç†å‘˜åå•": {
      "main": [
        [
          {
            "node": "å‡†å¤‡ç®¡ç†å‘˜é€šçŸ¥å¡ç‰‡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å‡†å¤‡ç®¡ç†å‘˜é€šçŸ¥å¡ç‰‡": {
      "main": [
        [
          {
            "node": "å‘ç®¡ç†å‘˜å‘é€é€šçŸ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "å‡†å¤‡å‘˜å·¥é€šçŸ¥å¡ç‰‡": {
      "main": [
        [
          {
            "node": "å‘å‘˜å·¥å‘é€å‘¨æŠ¥æ€»ç»“",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è®¡ç®—æ—¥æœŸèŒƒå›´": {
      "main": [
        [
          {
            "node": "è·å–å¤šå‘¨æ—¥æŠ¥æ•°æ®",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "è·å–å¤šå‘¨æ—¥æŠ¥æ•°æ®": {
      "main": [
        [
          {
            "node": "æŒ‰å‘˜å·¥åˆ†ç»„å¹¶æ ¼å¼åŒ–æ—¥æŠ¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "timezone": "Asia/Shanghai",
    "callerPolicy": "workflowsFromSameOwner",
    "availableInMCP": false
  },
  "versionId": "4325e632-7969-41af-a28a-1fc3f1536ba8",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a34391d7e308dacdc22e6d02a503e04eb0f43b9d0934253b57ca7d984edb83ae"
  },
  "id": "ID_PLACEHOLDER",
  "tags": []
}