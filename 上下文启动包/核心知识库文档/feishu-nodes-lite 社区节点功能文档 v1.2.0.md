# feishu-nodes-lite 社区节点功能文档 v1.2.0

## 📋 节点概述

**节点名称**: n8n-nodes-feishu-lite
**安装地址**: https://docs.n8n.io/integrations/community-nodes/installation/
**功能范围**: 提供完整的飞书平台API集成支持，覆盖知识库、通讯录、任务、电子表格、云空间、消息、云文档、日历、多维表格等核心功能。

**版本**: 1.2.0
**发布日期**: 2025-11-28
**适用范围**: `智能双日报管理系统 v1.2.0` 项目及类似 n8n-Feishu 集成场景。

## 🚀 核心功能模块

### 1. 知识库 (Wiki) - 12个操作

| 操作名称               | 功能描述                     | 适用场景               |
| ---------------------- | ---------------------------- | ---------------------- |
| 获取知识空间列表       | 获取用户可访问的所有知识空间 | 知识库管理、空间选择   |
| 获取知识空间信息       | 获取指定知识空间的详细信息   | 空间信息查看、权限检查 |
| 更新知识空间设置       | 修改知识空间的配置信息       | 空间配置管理           |
| 删除知识空间成员       | 移除知识空间的成员权限       | 权限管理、成员清理     |
| 获取知识空间成员列表   | 查询知识空间的所有成员       | 成员管理、权限审计     |
| 添加知识空间成员       | 向知识空间添加新成员         | 权限分配、团队协作     |
| 更新知识空间节点标题   | 修改知识库节点的标题         | 内容管理、文档组织     |
| 移动知识空间节点       | 调整知识库节点的位置         | 结构重组、内容整理     |
| 获取知识空间节点信息   | 获取节点的详细信息           | 内容查看、节点管理     |
| 获取知识空间子节点列表 | 查询节点的所有子节点         | 层级管理、内容导航     |
| 创建知识空间节点       | 新建知识库节点               | 内容创建、文档管理     |
| 创建知识空间节点副本   | 复制现有节点                 | 内容复用、模板创建     |

### 2. 通讯录 (User) - 1个核心操作

| 操作名称     | 功能描述                   | 适用场景                     |
| ------------ | -------------------------- | ---------------------------- |
| 获取用户信息 | 根据用户ID获取用户详细信息 | 用户管理、信息查询、身份验证 |

**使用示例**:
```json
{
  "resource": "user",
  "operation": "user:get",
  "user_id": "ou_xxx",
  "user_id_type": "open_id"
}
```

### 3. 任务管理 (Tasks) - 6个操作

| 操作名称     | 功能描述                 | 适用场景           |
| ------------ | ------------------------ | ------------------ |
| 更新任务     | 修改任务的基本信息和状态 | 任务管理、状态跟踪 |
| 获取任务详情 | 查询任务的详细信息       | 任务查看、进度监控 |
| 删除任务     | 删除指定任务             | 任务清理、数据管理 |
| 创建任务     | 新建任务                 | 任务分配、工作安排 |
| 移除任务成员 | 从任务中移除成员         | 成员管理、权限调整 |
| 添加任务成员 | 向任务添加成员           | 团队协作、任务分配 |

### 4. 电子表格 (Spreadsheets) - 常用操作

| 操作名称         | 功能描述               | 适用场景             |
| ---------------- | ---------------------- | -------------------- |
| 获取电子表格信息 | 查询表格的详细信息     | 信息查看、状态检查   |
| 创建电子表格     | 新建电子表格           | 数据管理、表格创建   |
| 获取工作表       | 查询表格中的所有工作表 | 工作表管理、结构查看 |
| 新增工作表       | 在表格中创建新工作表   | 数据分类、工作区管理 |
| 读取单个范围     | 读取指定范围的数据     | 数据查询、信息提取   |
| 追加数据         | 在表格末尾添加数据     | 数据收集、日志记录   |

### 5. 云空间 (Cloud Storage) - 2个操作

| 操作名称        | 功能描述             | 适用场景               |
| --------------- | -------------------- | ---------------------- |
| 上传素材        | 上传文件到飞书云空间 | 文件管理、资源存储     |
| 上传素材通过URL | 通过URL上传文件      | 远程文件获取、资源导入 |

### 6. 消息服务 (Messaging) - 常用操作

| 操作名称 | 功能描述             | 适用场景           |
| -------- | -------------------- | ------------------ |
| 发送消息 | 向用户或群聊发送消息 | 通知发送、信息推送 |
| 回复消息 | 回复指定消息         | 对话管理、互动处理 |
| 撤回消息 | 撤回已发送的消息     | 消息管理、错误修正 |

### 7. 云文档 (Documents) - 常用操作

| 操作名称           | 功能描述           | 适用场景           |
| ------------------ | ------------------ | ------------------ |
| 获取文档纯文本内容 | 提取文档的文本内容 | 内容分析、文本处理 |
| 获取文档基本信息   | 查询文档的基本属性 | 信息管理、文档检索 |
| 创建文档           | 新建云文档         | 文档创建、内容管理 |

### 8. 日历 (Calendar) - 常用操作

| 操作名称     | 功能描述             | 适用场景           |
| ------------ | -------------------- | ------------------ |
| 获取日程列表 | 获取日历中的所有日程 | 日程查看、时间管理 |
| 获取日程     | 查询指定日程的详情   | 信息查看、详情确认 |
| 创建日程     | 新建日程安排         | 时间规划、任务安排 |

### 9. 多维表格 (Bitable) - 常用操作

| 操作名称                       | 功能描述                   | 适用场景               |
| ------------------------------ | -------------------------- | ---------------------- |
| **查询记录 (search)**          | **根据条件查询表格记录**   | **数据检索、信息查询** |
| **获取记录 (get)**             | **根据记录ID获取详细信息** | **精确查询、记录查看** |
| **新增记录 (add)**             | **创建新的表格记录**       | **数据录入、信息添加** |
| **更新记录 (update)**          | **修改表格记录的内容**     | **数据编辑、信息更新** |
| 删除记录                       | 删除指定的表格记录         | 数据清理、记录管理     |
| **批量新增记录 (batchAdd)**    | **批量创建新记录**         | **数据导入、批量添加** |
| **批量更新记录 (batchUpdate)** | **批量修改多条记录**       | **批量操作、效率提升** |
| 批量删除记录                   | 批量删除多条记录           | 数据清理、批量管理     |
| 列出数据表                     | 查询应用中的所有数据表     | 表格管理、结构查看     |
| 列出字段                       | 查询数据表的所有字段       | 字段管理、结构查看     |
| 新增字段                       | 在数据表中添加新字段       | 结构扩展、字段管理     |

### 10. 授权 (Authorization) - 1个操作

| 操作名称                | 功能描述           | 适用场景          |
| ----------------------- | ------------------ | ----------------- |
| 获取当前应用AccessToken | 获取应用的访问令牌 | 身份验证、API调用 |

## 🔧 多维表格 (Bitable) 最佳实践 (v1.2.0)

### 推荐的 API 端点使用

基于官方文档和项目实践验证，推荐以下端点使用方式：

| 节点操作                           | 对应API                         | 用途                                 |
| ---------------------------------- | ------------------------------- | ------------------------------------ |
| `bitable:table:record:search`      | `POST .../records/search`       | **首选查询方式**，支持复杂过滤、排序 |
| `bitable:table:record:get`         | `GET .../records/:record_id`    | **精确获取单条记录**                 |
| `bitable:table:record:batchAdd`    | `POST .../records/batch_create` | **批量创建记录**，效率最高           |
| `bitable:table:record:batchUpdate` | `PUT .../records/batch_update`  | **批量更新记录**，保证原子性         |

### 关键字段数据格式

| 字段类型   | 正确格式                         | 说明                 |
| ---------- | -------------------------------- | -------------------- |
| **人员**   | `[{"id": "ou_xxx"}]`             | 必须是对象数组       |
| **关联**   | `["recXXXXX"]`                   | 必须是字符串数组     |
| **日期**   | `1702449755000`                  | 纯数字13位毫秒时间戳 |
| **超链接** | `{"text": "...", "link": "..."}` | 必须是对象           |

### 日期字段查询

支持的值格式：`["Today"]`, `["Yesterday"]`, `["ExactDate", 1702449755000]` 等。

### 配置示例 (查询)

```json
{
  "resource": "bitable",
  "operation": "bitable:table:record:search",
  "app_token": "your_app_token",
  "table_id": "your_table_id",
  "filter": {
    "conjunction": "and",
    "conditions": [
      {
        "field_name": "status",
        "operator": "is",
        "value": ["在职"]
      }
    ]
  },
  "page_size": 500
}
```

## 📝 版本修订历史

*   **v1.2.0 (2025-11-28)**
    *   文档版本号与`智能双日报管理系统 v1.2.0`同步。
    *   更新了“多维表格最佳实践”中的API端点使用，明确了`get`操作。
*   **v1.0.0 (2025-11-09)**
    *   项目首个稳定版本发布。
    *   本文档作为 `智能双日报管理系统 v1.0.0` 的一部分，统一了版本号，并固化了经过验证的节点功能和操作名。
